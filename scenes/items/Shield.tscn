[gd_scene load_steps=9 format=2]

[ext_resource path="res://assets/3D models/Shield/shield.obj" type="ArrayMesh" id=1]
[ext_resource path="res://assets/3D models/Shield/ShieldTex.png" type="Texture2D" id=2]
[ext_resource path="res://scenes/items/ShieldScript.gd" type="Script" id=3]

[sub_resource type="StandardMaterial3D" id=13]
resource_name = "wire_115115115"
params_cull_mode = 2
albedo_texture = ExtResource( 2 )
metallic = 0.35

[sub_resource type="ConvexPolygonShape3D" id=18]
points = PackedVector3Array( 27.5234, 1.60137, 17.088, 27.5234, 1.13855, 17.088, 27.2717, 1.49762, 6.10406, 27.1913, 3.33629, 6.07814, 27.4377, 3.44004, 17.0232, 6.34324, -1.99567, 29.4328, 6.35931, -3.85148, 29.5365, 6.35931, -4.3143, 29.5365, 15.8328, -2.72374, 23.9635, 25.9382, 0.492579, 15.954, 27.2717, 1.0348, 6.10406, 24.9421, 0.568363, -7.12852, 24.8671, 2.40974, -7.11556, 14.6975, 4.60838, -1.82124, 14.6975, 4.60748, 14.5996, -6.01138, -1.99567, 29.4328, -6.02744, -3.85148, 29.5365, -6.02744, -4.3143, 29.5365, 0.168612, -4.60842, 28.1951, 3.07117, -4.54436, 28.4478, 3.34964, -4.53083, 26.6139, 6.22007, -4.32694, 27.6507, 4.64562, -4.45414, -34.8314, 8.35683, -4.09417, -30.8331, 9.16548, -3.98681, -32.4143, 11.3558, -3.64668, -28.3318, 15.6186, -2.77516, 22.0778, 15.1259, -2.88974, -26.7312, 18.0874, -2.14182, -19.2206, 19.4101, -1.76471, -20.2185, 23.4587, -0.441191, -6.50643, 25.724, 0.406871, 6.32438, 24.9421, 0.104636, -7.12852, 19.4101, -1.30188, -20.2185, 19.3512, 0.545808, -20.1732, 15.0831, -0.575617, -26.6664, 0.168612, -2.28978, -36.5681, 11.8217, 4.60838, -1.82124, 11.8217, 4.60748, 14.5996, -27.1058, 3.44004, 17.0232, -27.1861, 1.60137, 17.088, -15.5009, -2.26091, 23.9635, -5.88821, -4.32694, 27.6507, -3.01778, -4.53083, 26.6139, -2.7393, -4.54436, 28.4478, -15.5009, -2.72374, 23.9635, -15.2867, -2.77516, 22.0778, -11.0239, -3.64668, -28.3318, -8.83361, -3.98681, -32.4143, -8.02496, -4.09417, -30.8331, -4.31376, -4.45414, -34.8314, 0.168612, -4.60842, -36.6653, 4.07796, -4.49113, -33.1012, 4.64562, -3.99132, -34.8314, 9.16548, -3.52308, -32.4143, 12.3304, -3.47256, -29.7833, 13.9799, -3.14326, -25.474, 15.1259, -2.42692, -26.7312, 12.3304, -3.00883, -29.7833, 13.1819, -0.975289, -28.6882, 11.5164, -1.28294, -30.3536, 0.168612, -4.1456, -36.6653, -4.31376, -3.99132, -34.8314, -4.30305, -2.13641, -34.7342, -8.80683, -1.66998, -32.3301, -11.1846, -1.28294, -30.3536, -14.7512, -0.575617, -26.6664, 9.1387, -1.66998, -32.3301, 4.63491, -2.13641, -34.7342, -19.0193, 0.545808, -20.1732, -24.5353, 2.40974, -7.11556, -26.8595, 3.33629, 6.07814, -26.9398, 1.49762, 6.10406, -27.1861, 1.13855, 17.088, -3.7461, -4.49113, -33.1012, -25.6063, 0.492579, 15.954, -23.1268, -0.441191, -6.50643, -19.0783, -1.76471, -20.2185, -17.7555, -2.14182, -19.2206, -14.794, -2.88974, -26.7312, -13.648, -3.14326, -25.474, -11.9986, -3.47256, -29.7833, -8.83361, -3.52308, -32.4143, -11.9986, -3.00883, -29.7833, -12.8447, -0.975289, -28.6882, -14.794, -2.42692, -26.7312, -19.0783, -1.30188, -20.2185, -24.6103, 0.568363, -7.12852, -26.9398, 1.0348, 6.10406, -25.3921, 0.406871, 6.32438, -24.6103, 0.104636, -7.12852 )

[sub_resource type="Animation" id=15]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ Vector3( 0, 0, 0 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:rotation_degrees")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ Vector3( -90, 90, 90 ) ]
}

[sub_resource type="Animation" id=17]
resource_name = "shield_down"
length = 2.25
step = 0.05
tracks/0/type = "value"
tracks/0/path = NodePath(".:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PackedFloat32Array( 0, 0.25 ),
"transitions": PackedFloat32Array( 1, 1 ),
"update": 0,
"values": [ Vector3( 0.0356894, 0.0684834, 0 ), Vector3( 0, 0, 0 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:rotation_degrees")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PackedFloat32Array( 0, 0.25 ),
"transitions": PackedFloat32Array( 1, 1 ),
"update": 0,
"values": [ Vector3( -84.353, 90, 90 ), Vector3( -90, 90, 90 ) ]
}

[sub_resource type="Animation" id=16]
resource_name = "shield_up"
length = 0.25
step = 0.05
tracks/0/type = "value"
tracks/0/path = NodePath(".:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PackedFloat32Array( 0, 0.25 ),
"transitions": PackedFloat32Array( 1, 1 ),
"update": 0,
"values": [ Vector3( 0, 0, 0 ), Vector3( 0.0356894, 0.0684834, 0 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:rotation_degrees")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PackedFloat32Array( 0, 0.25 ),
"transitions": PackedFloat32Array( 1, 1 ),
"update": 0,
"values": [ Vector3( -90, 90, 90 ), Vector3( -84.353, 90, 90 ) ]
}

[node name="Shield" type="Node3D"]
script = ExtResource( 3 )

[node name="Shield" type="MeshInstance3D" parent="."]
transform = Transform3D( -0.01, 8.74228e-10, -4.37114e-10, -4.37114e-10, 1.91069e-17, 0.01, 8.74228e-10, 0.01, 1.91069e-17, 0, 0, 0 )
mesh = ExtResource( 1 )
material/0 = SubResource( 13 )

[node name="ShieldArea" type="Area3D" parent="Shield"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Shield/ShieldArea"]
transform = Transform3D( 1.5, 8.90151e-37, -2.50556e-22, 0, 1.5, 5.32907e-15, 2.50556e-22, -5.32907e-15, 1.5, 0, 0, 0 )
shape = SubResource( 18 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
root_node = NodePath("../Shield")
anims/RESET = SubResource( 15 )
anims/shield_down = SubResource( 17 )
anims/shield_up = SubResource( 16 )

[node name="shakeTimer" type="Timer" parent="."]
wait_time = 3.0
one_shot = true

[node name="cooldownTimer" type="Timer" parent="."]
wait_time = 10.0
one_shot = true

[connection signal="animation_finished" from="AnimationPlayer" to="." method="_on_AnimationPlayer_animation_finished"]
[connection signal="timeout" from="shakeTimer" to="." method="_on_shakeTimer_timeout"]
[connection signal="timeout" from="cooldownTimer" to="." method="_on_cooldownTimer_timeout"]
